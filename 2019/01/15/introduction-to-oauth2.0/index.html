
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="즐거이 배우고 깊이 생각하라">
    <title>OAuth 2.0 - 기본개념 및 Authorization Grant - 즐거이 배우고 깊이 생각하라</title>
    <meta name="author" content="hyunto">
    
    
        <link rel="icon" href="https://hyunto.github.io/assets/images/favicon.ico">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"hyunto","sameAs":["https://github.com/hyunto","https://blog.naver.com/eqelizer","mailto:jhyunto@gmail.com"],"image":"author.jpg"},"articleBody":"최근 OAuth 2.0에 대해 공부하면서 다양한 Grant 종류가 존재함을 알게 되었습니다.기본 개념과 Grant 종류에 대해 잘 정리되어 OAuth 2.0 이해에 도움됬던 사이트들의 내용을 정리합니다.\n\n\n\n\n소개OAuth2는 사용자가 HTTP 서비스 상에서 어플리케이션의 제한된 접근을 허용하기 위한 인가(Authorization) 프레임워크 입니다.인증은 사용자 계정을 소유한 서비스로 위임하고, 사용자 계정에게 Third-Party 어플리케이션 접근 권한을 부여합니다.OAuth2는 웹, 데스크톱 어플리케이션, 모바일 디바이스 등을 위한 인가 플로우(Flow)를 제공합니다.\nOAuth 2.0 Specification 은 Access Token을 발급 받으려는 클라이언트에게 다양한 Grant(“Method”)를 제공하는 유연한 인가 프레임워크 입니다.Access Token은 API Endpoint로의 요청을 인증하는데 사용되며, 클라이언트의 데이터에 접근하기 위한 권한을 표현합니다.\n명세서에서는 Access Token을 발급하기 위한 5가지 Grant 타입을 정의합니다. :\n\nAuthorization Code Grant\n서버-사이드 어플리케이션에서 사용\n\n\nImplicit Grant\n모바일 앱 또는 웹 어플리케이션 (사용자의 장비에서 동작하는 어플리케이션)에서 사용\n\n\nResource Owner Credentials Grant\n클라이언트와 OAuth2 프로바이더와 동일한 도메인, 같은 서비스와 같이 서로 신뢰할 수 있는 어플리케이션일 때 사용\n\n\nClient Credentials Grant\nApplication API 접근시 사용 (예를 들어 Microservice Architecture에서 각 API 서비스간의 인가)\n\n\nRefresh Token Grant\nAccess Token 사용기간 만료시 Resource Owner가 매번 다시 인증, 인가 절차를 수행하지 않고 갱신함으로써 더 나은 사용자 경험을 제공하기 위해 사용\n\n\n\nOAuth 역할\nResource Owner : User\nResource Owner는 어플리케이션이 사용자 계정(보호된 자원)에 접근하도록 인가를 부여/승인하는 사용자 입니다.\n사용자 계정으로의 어플리케이션의 접근 권한은 “Scope”라는 것으로 제한됩니다.\n\n\nResource / Authorization Server : API Server\nResource Server는 보호된 사용자 계정을 호스팅하고, Access Token을 기반으로 보호된 자원으로의 요청을 승인, 응답합니다.\nAuthorization Server는 사용자의 ID를 확인한 다음 어플리케이션에게 Access Token을 발급합니다.\n보통 Resource Server와 Authorization Server의 조합을 OAuth 2.0 Provider라고 합니다.Resource Server는 Authorization Server와 하나의 서비스로 구현되기도 합니다. \n\n\nClient : Application\n사용자의 계정에 접근을 하려는 어플리케이션\n클라이언트는 먼저 사용자에게 인가받아야 하며, 이때 API 서버에 의해 승인받아야 합니다.\n\n\n\n추상적인 Protocol Flow\n각 OAuth 역할들이 일반적으로 어떻게 서로 상호작용하는지 추상적으로 설명합니다. :\n\nApplication(Client)는 보호된 자원으로 접근을 위해 사용자(Resource Owner)에게 인가 승인을 요청합니다.\n사용자(Resource Owner)가 인가 요청을 승인하면 Application(Client)는 승인 허가를 받습니다.\nApplication(Client)는 Authorization Server(API)로 Access Token 발급을 요청합니다.이때 인증을 위한 ID와 제공받을 권한을 함께 전달합니다.\n인증 정보와 제공할 권한 정보가 유효하면 Authorization Server(API)는 Application(Client)에게 Access Token을 발급합니다.이로써 인가(Authorization) 프로세스가 완료됩니다.\nApplication(Client)는 Resource Server(API)에게 인증을 위한 Access Token을 전달하면서 필요한 자원으로의 접근을 요청합니다.\nResource Server(API)는 Access Token 정보가 유효하면 해당 자원으로의 접근을 허용, 제공 합니다.\n\nApplication 등록어플리케이션이 OAuth를 사용하기 전에 서비스 등록을 해야 합니다.보통 Developer / API 웹 사이트에서 등록할 수 있습니다. 이때 다음 정보를 제공해야 합니다.\n\nApplication Name\nApplication Website\nRedirect URL 또는 Callback URL\n사용자가 어플리케이션을 승인 또는 거절한 후 사용자를 리다이렉트 할 URL\nAuthorization Code 또는 Access Token을 다루는 어플리케이션의 일부\n\n\n\nAuthorization Grant TypeAuthorization Code GrantAuthorization Code Grant 는 소스 코드가 공개적으로 노출되지 않고, 클라이언트 Secret 값을 안전하게 유지할 수 있는 서버-사이드 어플리케이션에 최적화되어 있기 때문에 가장 일반적으로 사용되는 방식입니다.\n이 방식은 “Redirection-based Flow” 입니다.즉, 어플리케이션은 User-Agent (i.e. 사용자의 웹 브라우저)와 상호작용 할 수 있어야 하고, User-Agent를 통해 라우팅되는 API Authorization Code를 받을 수 있어야 합니다.\n\nStep 1. Authorization Code Link먼저 Application(Client)는 OAuth 2.0 프로바이더에게 다음과 같이 Authorization Code Link를 제공합니다.\n1https://provider.oauth2.com/oauth/authorize?response_type=code&amp;client_id=$&#123;CLIENT_ID&#125;&amp;redirect_uri=$&#123;CALLBACK_URL&#125;&amp;scope=read\n\n\nhttps://oauth2-provider.coml/oauth/authorize : API Authorization Endpoint\nclient_id : Application의 Client ID. 보통 Facebook, Google과 같은 API 서비스 제공자가 등록된 어플리케이션을 구분하기 위해 제공하는 ID 값을 의미합니다.\nredirect_uri : Authorization Code를 승인 받은 후 User-Agent가 리다이렉트 될 URI\nresponse_type : Application(Client)가 사용을 원하는 Grant 타입을 지정하여 전달합니다. Authorization Code Grant와 Implicit Grant 방식에서만 사용됩니다.\ncode : Authorization Code\ntoken : Implicit Grant\n\n\nscope : Application(Client)이 요청하는 액세스 수준을 지정합니다.\n\nStep 2. User Authorizes Application만약 사용자가 접근 / 사용하려는 서비스에 로그인 되어 있지 않다면 우선 로그인 페이지로 이동합니다.로그인 후에 “해당 서비스의 특정 기능을 어떤 권한을 갖고 사용할지 허용 또는 거부하는 페이지(Authorization Page)”로 이동합니다.\n아래의 스크린샷은 DigitalOcean의 Authorization Page인데, “Thedropletbook App”이 “manicas@digitalocean.com“ 사용자에게 “Read” 권한 허용을 요청하는 것을 볼 수 있습니다.\nStep 3. Application Receives Authorization Code사용자가 권한 사용을 허가(승인 버튼 클릭)하면 Authorization Server는 Redirect URL (Callback URL)로 Authorization Code 또는 Access Token을 포함하여 리다이렉트 합니다.Redirect URL은 각 Developer / API 사이트에서 어플리케이션 등록 중 지정한 값 입니다.\n어플리케이션이 “dropletbook.com”이라고 가정할 때, 리다이렉트는 다음과 같이 보일 것 입니다. :\n1https://dropletbook.com/callback?code=AUTHORIZATION_CODE\n\nRedirect URL에는 민감한 정보가 포함되어 있으므로, 서비스가 사용자를 임의의 위치로 리다이렉트 하지 않는 것이 중요합니다.따라서 사용자가 올바른 위치로 리다이렉트 되는 것을 보장하기 위해 각  Developer / API 사이트에서 어플리케이션 등록시 한개 이상의 Redirect URL을 등록하도록 유도합니다.\nStep 4. Application Requests Access TokenApplication(Client)는 Access Token을 발급받기 위해 Authorization Server로 부터 받은 Authorization Code 값, Client Secret 값이 포함된 상세한 인증 정보를 Authorization Server로 전달합니다.\n1https://provider.oauth2.com/oauth/token?client_id=$&#123;CLIENT_ID&#125;&amp;client_secret=$&#123;CLIENT_SECRET&#125;&amp;grant_type=authorization_code&amp;code=$&#123;AUTHORIZATION_CODE&#125;&amp;redirect_uri=$&#123;CALLBACK_URL&#125;\n\n\nclient_id\nclient_secret\ngrant_type\ncode\nredirect_uri\n\nStep 5. Application Receives Access Token만약 인가 정보가 올바르다면 Authorization Server는 Application(Client)에게 Access Token (경우에 따라 Refresh Token이 될 수 있다)을 포함한 응답을 보냅니다.\n123456789101112&#123;    \"access_token\": \"$&#123;ACCESS_TOKEN&#125;\",    \"token_type\": \"bearer\",    \"expires_in\": 2592000,    \"refresh_token\": \"$&#123;REFRESH_TOKEN&#125;\",    \"scope\": \"read\",    \"uid\": 100101,    \"info\": &#123;        \"name\": \"Mark E. Mark\",        \"email\": \"mark@thefunkybunch.com\"    &#125;&#125;\n\n이제 Application(Client)는 보호된 리소스 사용을 허가받았습니다!Access Token이 만료되거나 폐지될 때까지 Access Token을 사용하여 서비스 API의 보호된 리소스를 제한된 권한 내에서 사용할 수 있습니다.\nImplicit GrantImplicit Grant 타입은 Client Secret 값의 기밀성을 보자하지 못하는 Mobile App.과 Web App.에서 사용됩니다.Authorization Code Grant 타입과 마찬가지로 이 방식 역시 “Redirection-Based Flow” 입니다. 그러나 Application(Client)에게  Access Token을 전달하기 위해 먼저 Access Token을 User-Agent에게 발급합니다. 따라서 Access Token이 사용자 및 사용자 장비의 다른 어플리케이션에 노출될 수 있습니다.또한 Implicit Grant 타입은 Application(Client)의 ID를 인증하지 않으며, 이를 위해 (Application 등록 시 설정한) Redirect URL에 의존하게 됩니다.\n이 Grant 타입은 Refresh Token을 지원하지 않습니다.\nImplicit Grant 타입의 프로세스를 간략히 설명하면 다음과 같습니다. : \n\n사용자(Resource Owner)는 Application(Client)을 승인하도록 요청받습니다.\nAuthorization Server는 User-Agent에게 Access Token을 전달합니다.\nUser-Agent는 Application(Client)에게 Access Token을 전달합니다.\n\n\nStep 1. Implicit Authorization LinkImplicit Grant 타입에서 사용자(Resource Owner)는 Authorization Server로부터 Access Token을 요청할 Autorization Link를 제공 받습니다. 이 링크는 response_type 값으로 Code 대신 Token을 요청하는 점을 제외하곤 Authorization Code Grant의 링크와 같습니다.\n1https://provider.oauth2.com/oauth/authorize?response_type=token&amp;client_id=$&#123;CLIENT_ID&#125;&amp;redirect_uri=$&#123;CALLBACK_URL&#125;&amp;scope=$&#123;SCOPE&#125;\n\nStep 2. User Authorizes Application사용자가 위 링크를 클릭하면 먼저 해당 서비스로 로그인을 하고, “해당 서비스의 특정 기능을 어떤 권한을 갖고 사용할지 허용 또는 거부하는 페이지(Authorization Page)”로 이동합니다.\n아래 스크린샷에서 “Thedropleetbook App”은 “manicas@digitalocean.com“ 사용자에게 READ 권한 허용을 요청하는 것을 볼 수 있습니다.\n\nStep 3. User-Agent Receives Access Token with Redirect URI사용자가 권한 사용을 허가(승인 버튼 클릭)하면 Authorization Server는 앞서 제공된 Redirection URI를 사용하여 User-Agent를 다시 Application(Client)로 리다이렉트 합니다.이때 Redirection URI에는 URI Fragment로 Access Token이 포함됩니다. 또한 state, token_type, expires_in 파라미터도 함께 전달됩니다.\n1https://dropletbook.com/callback#access_token=$&#123;ACCESS_TOKEN&#125;&amp;token_type=bearer&amp;state=xyz&amp;expires_in=119\n\nStep 4. User-Agent Follows the Redirect URIUser-Agent는 Access Token을 가진채로 리다이렉트 지시를 따라갑니다.\nStep 5. Application Sends Access Token Extraction ScriptApplication(Client)는 User-Agent가 유지한 전체 Redirect URI에서 Access Token을 추출할 수 있는 스크립트가 포함된 웹 페이지(보통 Javascript와 같은 Embedded Script가 포함된 HTML 페이지입니다.)를 응답합니다.\nRedirect URI로 부터 Access Token을 추출하는 Javascript 소스코드 예제 :\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/* Facebook에서 사용자의 친구 정보를 가져오는 스크립트 */$(document).ready(function() &#123;    var fragment = window.location.hash;    var res = getResponse(fragment);    window.location.hash = \"_#\";        if (res.hasError()) &#123;        $(\"&lt;div&gt;Error trying to obtain user's authorization!&lt;/div&gt;\").insertBefore('#friends');\t\treturn;    &#125;        getFriends(res['access_token'], function(friends) &#123;\t\t$(friends).each(function(index, friend) &#123;\t\t\t$('#friends').find('ul').append('&lt;li&gt;' + friend.name + '&lt;/li&gt;');\t\t&#125;);\t&#125;)&#125;);function getResponse(fragment) &#123;    var attributes = fragment.slice(1).split('&amp;');\tvar response = &#123;&#125;;\t$(attributes).each(function(idx, attr) &#123;\t\tvar keyValue = attr.split('=');\t\tresponse[keyValue[0]] = keyValue[1];\t&#125;);\tresponse.hasError = function() &#123;\t\treturn !response['access_token'];\t&#125;;\treturn response;&#125;function getFriends(accessToken, callback) &#123;\tvar baseUrl = 'https://graph.facebook.com/v2.9/';\tvar endpoint = 'me/friends';\tvar url = baseUrl + endpoint;\t$.ajax(&#123;\t\turl: url,\t\tbeforeSend: function(xhr) &#123;\t\t\txhr.setRequestHeader(\"Authorization\", \"bearer \" + accessToken);\t\t&#125;,\t\tsuccess: function(result) &#123;\t\t\tvar friends = result.data;\t\t\tcallback(friends);\t\t&#125;,\t\terror: function(jqXHR, textStatus, errorThrown) &#123;\t\t\tconsole.log(textStatus);\t\t&#125;\t&#125;)&#125;\n\nStep 6. Access Token Passed to ApplicationUser-Agent는 Application(Client) 제공된 스크립트를 실행하고, 추출된 Access Token을 Application(Client)에게 전달합니다.\n이제 Application(Client)는 보호된 리소스 사용을 허가받았습니다!Access Token이 만료되거나 폐지될 때까지 Access Token을 사용하여 서비스 API의 보호된 리소스를 제한된 권한 내에서 사용할 수 있습니다.\nResource Owner Password Credentials GrantApplication(Client)는 Resource Owner의 Password Credential 정보(Username, Password)만을 사용하여 Access Token 발급을 요청합니다.\nResource Owner Password Credentials의 동작 방식은 다음과 같습니다. :\n\n사용자(Resource Owner)는 인증 정보(Username, Password)를 Application(Client)에게 직접 전달합니다.\nApplication(Client)는 앞서 받은 인증 정보를 Authorization Server로 전송하여 Access Token 발급을 요청합니다.\nAuthorization Server는 클라이언트를 인증하고, Resource Owner Credentials을 검증한 후에 Access Token을 발급합니다.\n\nApplication(Client)과 OAuth 2.0 프로바이더가 같은 도메인/솔루션 내에 존재(First-Party)하여 서로 신뢰할 수 있는 경우 이 Grant 타입을 사용합니다.단, Application(Client)는 사용자의 인증정보(Username, Password)를 별도로 보관하지 않아야 합니다.\nAccess Token 발급 요청 URL 예시 :\n1curl -X POST \"https://provider.oauth2.com/oauth/token\" --user $&#123;CLIENT_ID&#125;:$&#123;CLIENT_SECRET&#125; -H \"accept: application/json\" -H \"content-type: application/x-www-formurlencoded\" -d \"grant_type=password&amp;username=$&#123;USERNAME&#125;&amp;password=$&#123;PASSWORD&#125;&amp;scope=$&#123;SCOPE&#125;\"\n\nAccess Token 발급 요청 예시 :\n123456POST /token HTTP/1.1Host: server.example.comAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JWContent-Type: application/x-www-form-urlencodedgrant_type=password&amp;username=johndoe&amp;password=A3ddj3w\n\nAccess Token 발급 응답 예시 :\n123456789101112HTTP/1.1 200 OKContent-Type: application/json;charset=UTF-8Cache-Control: no-storePragma: no-cache&#123;    \"access_token\":\"2YotnFZFEjr1zCsicMWpAA\",    \"token_type\":\"example\",    \"expires_in\":3600,    \"refresh_token\":\"tGzv3JOkF0XG5Qx2TlKWIA\",    \"example_parameter\":\"example_value\"&#125;\n\nClient Credentials GrantApplication(Client)는 오직 Client Credential 정보(Client ID, Client Secret)만을 사용하여 Access Token 발급을 요청합니다.\n이 Grant 타입은 Resource Owner에게서 권한을 위임 받아 제한된 리소스에 접근하는 것이 아니라 자신의 목적을 위해 어플리케이션을 사용하는 것 입니다.Refresh Token을 사용하면 쉽게 Access Token을 갱신하여 사용할 수 있고, 동적으로 등록하는 과정이 쉬우며, 서비스 통합 시 모든 과정을 자동화 할 수 있기 때문에 마이크로서비스 아키텍처에서 채택되고 있습니다.\nAccess Token 발급 요청 URL 예시 : \n1curl -X POST \"https://provider.oauth2.com/oauth/token\" --user $&#123;CLIENT_ID&#125;:$&#123;CLIERNT_SECRET&#125; -d \"grant_type=client_credentials&amp;scope=$&#123;SCOPE&#125;\"\n\nAccess Token 발급 요청 예시 :\n123456POST /token HTTP/1.1Host: server.example.comAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JWContent-Type: application/x-www-form-urlencodedgrant_type=client_credentials\n\nAccess Token 발급 응답 예시 :\n1234567891011HTTP/1.1 200 OKContent-Type: application/json;charset=UTF-8Cache-Control: no-storePragma: no-cache&#123;    \"access_token\":\"2YotnFZFEjr1zCsicMWpAA\",    \"token_type\":\"example\",    \"expires_in\":3600,    \"example_parameter\":\"example_value\"&#125;\n\nRefresh Token Grant만약 사용기간이 만료된 Access Token을 사용해 제한된 리소스 접근을 시도하면 “Invalid Token Error” 에러 메세지를 보게 됩니다.Access Token 발급시 Refresh Token 값을 함께 받았다면 이를 사용해 새로운 Access Token 발급 요청을 할 수 있습니다.따라서 Third-Party 어플리케이션은 사용자(Resource Owner)가 로그인 상태가 아니더라도 Refresh Token을 통해 새로운 Access Token을 발급받아 필요한 리소스에 접근할 수 있게 됩니다.단, Refresh Token은 Authorization Code Grant 타입과 Resource Owner Password Credentials Grant 타입에서만 사용할 수 있습니다.\nAccess Token 사용법일단 Application(Client)가 Access Token을 발급받고 나면 사용기간이 만료되거나 폐기되기 전까지 API를 통해 제한된 권한 내에서 보호된 리소스로 접근할 수 있습니다.\n다음은 발급받은 Access Token을 사용하여 API 서버로 접근하는 예시입니다. :\n1curl -X POST \"https://example.server.com/api/$&#123;OBJECT&#125;\" -H \"Authorization: Bearer $&#123;ACCESS_TOKEN&#125;\"\n\n그러면 나는 어떤 Grant 타입을 선택해야 할까?연동하려는 서비스가 First-Party 또는 Third-Party 인지, Web App. 또는 Native App. 또는 User-Agent 기반 App. 인지에 따라 OAuth 2.0 Authorization Grant 타입을 결정할 수 있습니다.\n\n\n\n\nWeb Application\nA web application is a confidential client running on a web server.  Resource owners access the client via an HTML user interface rendered in a user-agent on the device used by the resource owner.  The client credentials as well as any access  token issued to the client are stored on the web server and are not exposed to or accessible by the resource owner.\n\n\nUser-Agent 기반 Application\nA user-agent-based application is a public client in which the client code is downloaded from a web server and executes within a user-agent (e.g., web browser) on the device used by the resource owner.  Protocol data and credentials are easily accessible (and often visible) to the resource owner.  Since such applications reside within the user-agent, they can make seamless use of the user-agent capabilities when requesting authorization.\n\n\nNative Application\nA native application is a public client installed and executed on the device used by the resource owner.  Protocol data and credentials are accessible to the resource owner.  It is assumed that any client authentication credentials included in the application can be extracted.  On the other hand, dynamically issued credentials such as access tokens or refresh tokens can receive an acceptable level of protection.  At a minimum, these credentials are protected from hostile servers with which the application may interact.  On some platforms, these credentials might be protected from other applications residing on the same device.\n\n\n\n\nReference\n\nAn Introduction to OAuth 2, DigitalOcean\nA Guide To OAuth 2.0 Grants, Alex Bilbie Blog\nRFC 6749 - The OAuth 2.0 Authorization Framework\nOAuth.com\nAuth0 - Which OAuth 2.0 Grant should I use?\n\n\n","dateCreated":"2019-01-15T13:07:26+09:00","dateModified":"2019-08-08T23:23:01+09:00","datePublished":"2019-01-15T13:07:26+09:00","description":"최근 OAuth 2.0에 대해 공부하면서 다양한 Grant 종류가 존재함을 알게 되었습니다.기본 개념과 Grant 종류에 대해 잘 정리되어 OAuth 2.0 이해에 도움됬던 사이트들의 내용을 정리합니다.","headline":"OAuth 2.0 - 기본개념 및 Authorization Grant","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/"},"publisher":{"@type":"Organization","name":"hyunto","sameAs":["https://github.com/hyunto","https://blog.naver.com/eqelizer","mailto:jhyunto@gmail.com"],"image":"author.jpg","logo":{"@type":"ImageObject","url":"author.jpg"}},"url":"https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/","keywords":"OAuth 2.0"}</script>
    <meta name="description" content="최근 OAuth 2.0에 대해 공부하면서 다양한 Grant 종류가 존재함을 알게 되었습니다.기본 개념과 Grant 종류에 대해 잘 정리되어 OAuth 2.0 이해에 도움됬던 사이트들의 내용을 정리합니다.">
<meta name="keywords" content="OAuth 2.0">
<meta property="og:type" content="blog">
<meta property="og:title" content="OAuth 2.0 - 기본개념 및 Authorization Grant">
<meta property="og:url" content="https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/index.html">
<meta property="og:site_name" content="즐거이 배우고 깊이 생각하라">
<meta property="og:description" content="최근 OAuth 2.0에 대해 공부하면서 다양한 Grant 종류가 존재함을 알게 되었습니다.기본 개념과 Grant 종류에 대해 잘 정리되어 OAuth 2.0 이해에 도움됬던 사이트들의 내용을 정리합니다.">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/oauth2-abstract-protocol-flow.jpg">
<meta property="og:image" content="https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/authorization-code-flow.jpg">
<meta property="og:image" content="https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/authorization-page.jpg">
<meta property="og:image" content="https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/implicit-flow.jpg">
<meta property="og:image" content="https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/authorization-page.jpg">
<meta property="og:image" content="https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/which-oauth2-grant-should-i-use.png">
<meta property="og:updated_time" content="2019-08-08T14:23:01.943Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OAuth 2.0 - 기본개념 및 Authorization Grant">
<meta name="twitter:description" content="최근 OAuth 2.0에 대해 공부하면서 다양한 Grant 종류가 존재함을 알게 되었습니다.기본 개념과 Grant 종류에 대해 잘 정리되어 OAuth 2.0 이해에 도움됬던 사이트들의 내용을 정리합니다.">
<meta name="twitter:image" content="https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/oauth2-abstract-protocol-flow.jpg">
    
    
        
    
    
        <meta property="og:image" content="https://hyunto.github.io/assets/images/author.jpg">
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-2dwn68oxrx7garnr65iriskewle1uhxjgd7vwi5ghcmktc2mzvq8clkrcp9l.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-113695151-1', 'auto');
        ga('send', 'pageview');
    </script>


    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">즐거이 배우고 깊이 생각하라</a>
    </div>
    
        
            <a class="header-right-icon open-algoria-search" href="#about">
        
        
            <i class="fa fa-lg fa-search"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/author.jpg" alt="Author&#39;s picture">
                </a>
                <h4 class="sidebar-profile-name">hyunto</h4>
                
                    <h5 class="sidebar-profile-bio"><p>호학심사(好學深思)<br>즐거이 배우고 깊이 생각하라</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="Home">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="Categories">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="Tags">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="Archives">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link open-algolia-search" href="#search" title="Search">
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" title="About">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/hyunto" target="_blank" rel="external nofollow noopener noreferrer" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://blog.naver.com/eqelizer" target="_blank" rel="external nofollow noopener noreferrer" title="Previous Blog">
                    
                        <i class="sidebar-button-icon fas fa-paper-plane" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Previous Blog</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="mailto:jhyunto@gmail.com" target="_blank" rel="external nofollow noopener noreferrer" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/atom.xml" title="RSS">
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2" class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            OAuth 2.0 - 기본개념 및 Authorization Grant
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-01-15T13:07:26+09:00">
	
		    Jan 15, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Programming/">Programming</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>최근 OAuth 2.0에 대해 공부하면서 다양한 Grant 종류가 존재함을 알게 되었습니다.<br>기본 개념과 Grant 종류에 대해 잘 정리되어 OAuth 2.0 이해에 도움됬던 사이트들의 내용을 정리합니다.</p>
<a id="more"></a>

<h1 id="table-of-contents">Table of Contents</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#소개"><span class="toc-text">소개</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OAuth-역할"><span class="toc-text">OAuth 역할</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#추상적인-Protocol-Flow"><span class="toc-text">추상적인 Protocol Flow</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Application-등록"><span class="toc-text">Application 등록</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Authorization-Grant-Type"><span class="toc-text">Authorization Grant Type</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Authorization-Code-Grant"><span class="toc-text">Authorization Code Grant</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-1-Authorization-Code-Link"><span class="toc-text">Step 1. Authorization Code Link</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-2-User-Authorizes-Application"><span class="toc-text">Step 2. User Authorizes Application</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-3-Application-Receives-Authorization-Code"><span class="toc-text">Step 3. Application Receives Authorization Code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-4-Application-Requests-Access-Token"><span class="toc-text">Step 4. Application Requests Access Token</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-5-Application-Receives-Access-Token"><span class="toc-text">Step 5. Application Receives Access Token</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Implicit-Grant"><span class="toc-text">Implicit Grant</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-1-Implicit-Authorization-Link"><span class="toc-text">Step 1. Implicit Authorization Link</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-2-User-Authorizes-Application-1"><span class="toc-text">Step 2. User Authorizes Application</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-3-User-Agent-Receives-Access-Token-with-Redirect-URI"><span class="toc-text">Step 3. User-Agent Receives Access Token with Redirect URI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-4-User-Agent-Follows-the-Redirect-URI"><span class="toc-text">Step 4. User-Agent Follows the Redirect URI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-5-Application-Sends-Access-Token-Extraction-Script"><span class="toc-text">Step 5. Application Sends Access Token Extraction Script</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-6-Access-Token-Passed-to-Application"><span class="toc-text">Step 6. Access Token Passed to Application</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Resource-Owner-Password-Credentials-Grant"><span class="toc-text">Resource Owner Password Credentials Grant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Client-Credentials-Grant"><span class="toc-text">Client Credentials Grant</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Refresh-Token-Grant"><span class="toc-text">Refresh Token Grant</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Access-Token-사용법"><span class="toc-text">Access Token 사용법</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#그러면-나는-어떤-Grant-타입을-선택해야-할까"><span class="toc-text">그러면 나는 어떤 Grant 타입을 선택해야 할까?</span></a></li></ol>

<h1 id="소개"><a href="#소개" class="headerlink" title="소개"></a>소개</h1><p>OAuth2는 사용자가 HTTP 서비스 상에서 어플리케이션의 제한된 접근을 허용하기 위한 인가(Authorization) 프레임워크 입니다.<br>인증은 사용자 계정을 소유한 서비스로 위임하고, 사용자 계정에게 Third-Party 어플리케이션 접근 권한을 부여합니다.<br>OAuth2는 웹, 데스크톱 어플리케이션, 모바일 디바이스 등을 위한 인가 플로우(Flow)를 제공합니다.</p>
<p><a href="http://tools.ietf.org/html/rfc6749" rel="external nofollow noopener noreferrer" target="_blank">OAuth 2.0 Specification</a> 은 Access Token을 발급 받으려는 클라이언트에게 다양한 Grant(“Method”)를 제공하는 유연한 인가 프레임워크 입니다.<br>Access Token은 API Endpoint로의 요청을 인증하는데 사용되며, 클라이언트의 데이터에 접근하기 위한 권한을 표현합니다.</p>
<p>명세서에서는 Access Token을 발급하기 위한 5가지 Grant 타입을 정의합니다. :</p>
<ul>
<li>Authorization Code Grant<ul>
<li>서버-사이드 어플리케이션에서 사용</li>
</ul>
</li>
<li>Implicit Grant<ul>
<li>모바일 앱 또는 웹 어플리케이션 (사용자의 장비에서 동작하는 어플리케이션)에서 사용</li>
</ul>
</li>
<li>Resource Owner Credentials Grant<ul>
<li>클라이언트와 OAuth2 프로바이더와 동일한 도메인, 같은 서비스와 같이 서로 신뢰할 수 있는 어플리케이션일 때 사용</li>
</ul>
</li>
<li>Client Credentials Grant<ul>
<li>Application API 접근시 사용 (예를 들어 Microservice Architecture에서 각 API 서비스간의 인가)</li>
</ul>
</li>
<li>Refresh Token Grant<ul>
<li>Access Token 사용기간 만료시 Resource Owner가 매번 다시 인증, 인가 절차를 수행하지 않고 갱신함으로써 더 나은 사용자 경험을 제공하기 위해 사용</li>
</ul>
</li>
</ul>
<h1 id="OAuth-역할"><a href="#OAuth-역할" class="headerlink" title="OAuth 역할"></a>OAuth 역할</h1><ul>
<li>Resource Owner : User<ul>
<li>Resource Owner는 어플리케이션이 사용자 계정(보호된 자원)에 접근하도록 인가를 부여/승인하는 사용자 입니다.</li>
<li>사용자 계정으로의 어플리케이션의 접근 권한은 “Scope”라는 것으로 제한됩니다.</li>
</ul>
</li>
<li>Resource / Authorization Server : API Server<ul>
<li>Resource Server는 보호된 사용자 계정을 호스팅하고, Access Token을 기반으로 보호된 자원으로의 요청을 승인, 응답합니다.</li>
<li>Authorization Server는 사용자의 ID를 확인한 다음 어플리케이션에게 Access Token을 발급합니다.</li>
<li>보통 Resource Server와 Authorization Server의 조합을 OAuth 2.0 Provider라고 합니다.<br>Resource Server는 Authorization Server와 하나의 서비스로 구현되기도 합니다. </li>
</ul>
</li>
<li>Client : Application<ul>
<li>사용자의 계정에 접근을 하려는 어플리케이션</li>
<li>클라이언트는 먼저 사용자에게 인가받아야 하며, 이때 API 서버에 의해 승인받아야 합니다.</li>
</ul>
</li>
</ul>
<h1 id="추상적인-Protocol-Flow"><a href="#추상적인-Protocol-Flow" class="headerlink" title="추상적인 Protocol Flow"></a>추상적인 Protocol Flow</h1><p><img src="oauth2-abstract-protocol-flow.jpg" alt="Abstract Protocol Flow"></p>
<p>각 OAuth 역할들이 일반적으로 어떻게 서로 상호작용하는지 추상적으로 설명합니다. :</p>
<ol>
<li>Application(Client)는 보호된 자원으로 접근을 위해 사용자(Resource Owner)에게 인가 승인을 요청합니다.</li>
<li>사용자(Resource Owner)가 인가 요청을 승인하면 Application(Client)는 승인 허가를 받습니다.</li>
<li>Application(Client)는 Authorization Server(API)로 Access Token 발급을 요청합니다.<br>이때 인증을 위한 ID와 제공받을 권한을 함께 전달합니다.</li>
<li>인증 정보와 제공할 권한 정보가 유효하면 Authorization Server(API)는 Application(Client)에게 Access Token을 발급합니다.<br>이로써 인가(Authorization) 프로세스가 완료됩니다.</li>
<li>Application(Client)는 Resource Server(API)에게 인증을 위한 Access Token을 전달하면서 필요한 자원으로의 접근을 요청합니다.</li>
<li>Resource Server(API)는 Access Token 정보가 유효하면 해당 자원으로의 접근을 허용, 제공 합니다.</li>
</ol>
<h1 id="Application-등록"><a href="#Application-등록" class="headerlink" title="Application 등록"></a>Application 등록</h1><p>어플리케이션이 OAuth를 사용하기 전에 서비스 등록을 해야 합니다.<br>보통 Developer / API 웹 사이트에서 등록할 수 있습니다. 이때 다음 정보를 제공해야 합니다.</p>
<ul>
<li>Application Name</li>
<li>Application Website</li>
<li>Redirect URL 또는 Callback URL<ul>
<li>사용자가 어플리케이션을 승인 또는 거절한 후 사용자를 리다이렉트 할 URL</li>
<li>Authorization Code 또는 Access Token을 다루는 어플리케이션의 일부</li>
</ul>
</li>
</ul>
<h1 id="Authorization-Grant-Type"><a href="#Authorization-Grant-Type" class="headerlink" title="Authorization Grant Type"></a>Authorization Grant Type</h1><h2 id="Authorization-Code-Grant"><a href="#Authorization-Code-Grant" class="headerlink" title="Authorization Code Grant"></a>Authorization Code Grant</h2><p>Authorization Code Grant 는 소스 코드가 공개적으로 노출되지 않고, 클라이언트 Secret 값을 안전하게 유지할 수 있는 서버-사이드 어플리케이션에 최적화되어 있기 때문에 가장 일반적으로 사용되는 방식입니다.</p>
<p>이 방식은 “Redirection-based Flow” 입니다.<br>즉, 어플리케이션은 User-Agent (i.e. 사용자의 웹 브라우저)와 상호작용 할 수 있어야 하고, User-Agent를 통해 라우팅되는 API Authorization Code를 받을 수 있어야 합니다.</p>
<p><img src="authorization-code-flow.jpg" alt="Authorization Code Grant Flow"></p>
<h3 id="Step-1-Authorization-Code-Link"><a href="#Step-1-Authorization-Code-Link" class="headerlink" title="Step 1. Authorization Code Link"></a>Step 1. Authorization Code Link</h3><p>먼저 Application(Client)는 OAuth 2.0 프로바이더에게 다음과 같이 Authorization Code Link를 제공합니다.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span>/<span class="regexp">/provider.oauth2.com/oauth</span><span class="regexp">/authorize?response_type=code&amp;client_id=$&#123;CLIENT_ID&#125;&amp;redirect_uri=$&#123;CALLBACK_URL&#125;&amp;scope=read</span></span><br></pre></td></tr></table></figure>

<ul>
<li><a href="https://oauth2-provider.coml/oauth/authorize" rel="external nofollow noopener noreferrer" target="_blank">https://oauth2-provider.coml/oauth/authorize</a> : API Authorization Endpoint</li>
<li>client_id : Application의 Client ID. 보통 Facebook, Google과 같은 API 서비스 제공자가 등록된 어플리케이션을 구분하기 위해 제공하는 ID 값을 의미합니다.</li>
<li>redirect_uri : Authorization Code를 승인 받은 후 User-Agent가 리다이렉트 될 URI</li>
<li>response_type : Application(Client)가 사용을 원하는 Grant 타입을 지정하여 전달합니다. Authorization Code Grant와 Implicit Grant 방식에서만 사용됩니다.<ul>
<li>code : Authorization Code</li>
<li>token : Implicit Grant</li>
</ul>
</li>
<li>scope : Application(Client)이 요청하는 액세스 수준을 지정합니다.</li>
</ul>
<h3 id="Step-2-User-Authorizes-Application"><a href="#Step-2-User-Authorizes-Application" class="headerlink" title="Step 2. User Authorizes Application"></a>Step 2. User Authorizes Application</h3><p>만약 사용자가 접근 / 사용하려는 서비스에 로그인 되어 있지 않다면 우선 로그인 페이지로 이동합니다.<br>로그인 후에 “해당 서비스의 특정 기능을 어떤 권한을 갖고 사용할지 허용 또는 거부하는 페이지(Authorization Page)”로 이동합니다.</p>
<p>아래의 스크린샷은 DigitalOcean의 Authorization Page인데, “Thedropletbook App”이 “<a href="mailto:manicas@digitalocean.com" rel="external nofollow noopener noreferrer" target="_blank">manicas@digitalocean.com</a>“ 사용자에게 “Read” 권한 허용을 요청하는 것을 볼 수 있습니다.<br><img src="authorization-page.jpg" alt="Authorization Page"></p>
<h3 id="Step-3-Application-Receives-Authorization-Code"><a href="#Step-3-Application-Receives-Authorization-Code" class="headerlink" title="Step 3. Application Receives Authorization Code"></a>Step 3. Application Receives Authorization Code</h3><p>사용자가 권한 사용을 허가(승인 버튼 클릭)하면 Authorization Server는 Redirect URL (Callback URL)로 Authorization Code 또는 Access Token을 포함하여 리다이렉트 합니다.<br>Redirect URL은 각 Developer / API 사이트에서 어플리케이션 등록 중 지정한 값 입니다.</p>
<p>어플리케이션이 “dropletbook.com”이라고 가정할 때, 리다이렉트는 다음과 같이 보일 것 입니다. :</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span>/<span class="regexp">/dropletbook.com/callback</span>?code=AUTHORIZATION_CODE</span><br></pre></td></tr></table></figure>

<p>Redirect URL에는 민감한 정보가 포함되어 있으므로, 서비스가 사용자를 임의의 위치로 리다이렉트 하지 않는 것이 중요합니다.<br>따라서 사용자가 올바른 위치로 리다이렉트 되는 것을 보장하기 위해 각  Developer / API 사이트에서 어플리케이션 등록시 한개 이상의 Redirect URL을 등록하도록 유도합니다.</p>
<h3 id="Step-4-Application-Requests-Access-Token"><a href="#Step-4-Application-Requests-Access-Token" class="headerlink" title="Step 4. Application Requests Access Token"></a>Step 4. Application Requests Access Token</h3><p>Application(Client)는 Access Token을 발급받기 위해 <strong>Authorization Server로 부터 받은 Authorization Code 값</strong>, <strong>Client Secret 값이 포함된 상세한 인증 정보</strong>를 Authorization Server로 전달합니다.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span>/<span class="regexp">/provider.oauth2.com/oauth</span><span class="regexp">/token?client_id=$&#123;CLIENT_ID&#125;&amp;client_secret=$&#123;CLIENT_SECRET&#125;&amp;grant_type=authorization_code&amp;code=$&#123;AUTHORIZATION_CODE&#125;&amp;redirect_uri=$&#123;CALLBACK_URL&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>client_id</li>
<li>client_secret</li>
<li>grant_type</li>
<li>code</li>
<li>redirect_uri</li>
</ul>
<h3 id="Step-5-Application-Receives-Access-Token"><a href="#Step-5-Application-Receives-Access-Token" class="headerlink" title="Step 5. Application Receives Access Token"></a>Step 5. Application Receives Access Token</h3><p>만약 인가 정보가 올바르다면 Authorization Server는 Application(Client)에게 Access Token (경우에 따라 Refresh Token이 될 수 있다)을 포함한 응답을 보냅니다.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"access_token"</span>: <span class="string">"$&#123;ACCESS_TOKEN&#125;"</span>,</span><br><span class="line">    <span class="attr">"token_type"</span>: <span class="string">"bearer"</span>,</span><br><span class="line">    <span class="attr">"expires_in"</span>: <span class="number">2592000</span>,</span><br><span class="line">    <span class="attr">"refresh_token"</span>: <span class="string">"$&#123;REFRESH_TOKEN&#125;"</span>,</span><br><span class="line">    <span class="attr">"scope"</span>: <span class="string">"read"</span>,</span><br><span class="line">    <span class="attr">"uid"</span>: <span class="number">100101</span>,</span><br><span class="line">    <span class="attr">"info"</span>: &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Mark E. Mark"</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">"mark@thefunkybunch.com"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이제 Application(Client)는 보호된 리소스 사용을 허가받았습니다!<br>Access Token이 만료되거나 폐지될 때까지 Access Token을 사용하여 서비스 API의 보호된 리소스를 제한된 권한 내에서 사용할 수 있습니다.</p>
<h2 id="Implicit-Grant"><a href="#Implicit-Grant" class="headerlink" title="Implicit Grant"></a>Implicit Grant</h2><p>Implicit Grant 타입은 Client Secret 값의 기밀성을 보자하지 못하는 Mobile App.과 Web App.에서 사용됩니다.<br>Authorization Code Grant 타입과 마찬가지로 이 방식 역시 “Redirection-Based Flow” 입니다. 그러나 Application(Client)에게  Access Token을 전달하기 위해 먼저 Access Token을 User-Agent에게 발급합니다. 따라서 Access Token이 사용자 및 사용자 장비의 다른 어플리케이션에 노출될 수 있습니다.<br>또한 Implicit Grant 타입은 Application(Client)의 ID를 인증하지 않으며, 이를 위해 (Application 등록 시 설정한) Redirect URL에 의존하게 됩니다.</p>
<p>이 Grant 타입은 Refresh Token을 지원하지 않습니다.</p>
<p>Implicit Grant 타입의 프로세스를 간략히 설명하면 다음과 같습니다. : </p>
<ol>
<li>사용자(Resource Owner)는 Application(Client)을 승인하도록 요청받습니다.</li>
<li>Authorization Server는 User-Agent에게 Access Token을 전달합니다.</li>
<li>User-Agent는 Application(Client)에게 Access Token을 전달합니다.</li>
</ol>
<p><img src="implicit-flow.jpg" alt="Implicit Grant Flow"></p>
<h3 id="Step-1-Implicit-Authorization-Link"><a href="#Step-1-Implicit-Authorization-Link" class="headerlink" title="Step 1. Implicit Authorization Link"></a>Step 1. Implicit Authorization Link</h3><p>Implicit Grant 타입에서 사용자(Resource Owner)는 Authorization Server로부터 Access Token을 요청할 Autorization Link를 제공 받습니다. 이 링크는 response_type 값으로 Code 대신 Token을 요청하는 점을 제외하곤 Authorization Code Grant의 링크와 같습니다.</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">https</span>://provider.oauth2.com/oauth/authorize?response_<span class="keyword">type</span>=token&amp;client_id=$&#123;<span class="type">CLIENT_ID</span>&#125;&amp;redirect_uri=$&#123;<span class="type">CALLBACK_URL</span>&#125;&amp;scope=$&#123;<span class="type">SCOPE</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Step-2-User-Authorizes-Application-1"><a href="#Step-2-User-Authorizes-Application-1" class="headerlink" title="Step 2. User Authorizes Application"></a>Step 2. User Authorizes Application</h3><p>사용자가 위 링크를 클릭하면 먼저 해당 서비스로 로그인을 하고, “해당 서비스의 특정 기능을 어떤 권한을 갖고 사용할지 허용 또는 거부하는 페이지(Authorization Page)”로 이동합니다.</p>
<p>아래 스크린샷에서 “Thedropleetbook App”은 “<a href="mailto:manicas@digitalocean.com" rel="external nofollow noopener noreferrer" target="_blank">manicas@digitalocean.com</a>“ 사용자에게 READ 권한 허용을 요청하는 것을 볼 수 있습니다.</p>
<p><img src="authorization-page.jpg" alt="Authorization Page"></p>
<h3 id="Step-3-User-Agent-Receives-Access-Token-with-Redirect-URI"><a href="#Step-3-User-Agent-Receives-Access-Token-with-Redirect-URI" class="headerlink" title="Step 3. User-Agent Receives Access Token with Redirect URI"></a>Step 3. User-Agent Receives Access Token with Redirect URI</h3><p>사용자가 권한 사용을 허가(승인 버튼 클릭)하면 Authorization Server는 앞서 제공된 Redirection URI를 사용하여 User-Agent를 다시 Application(Client)로 리다이렉트 합니다.<br>이때 Redirection URI에는 URI Fragment로 Access Token이 포함됩니다. 또한 state, token_type, expires_in 파라미터도 함께 전달됩니다.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span>/<span class="regexp">/dropletbook.com/callback</span><span class="comment">#access_token=$&#123;ACCESS_TOKEN&#125;&amp;token_type=bearer&amp;state=xyz&amp;expires_in=119</span></span><br></pre></td></tr></table></figure>

<h3 id="Step-4-User-Agent-Follows-the-Redirect-URI"><a href="#Step-4-User-Agent-Follows-the-Redirect-URI" class="headerlink" title="Step 4. User-Agent Follows the Redirect URI"></a>Step 4. User-Agent Follows the Redirect URI</h3><p>User-Agent는 Access Token을 가진채로 리다이렉트 지시를 따라갑니다.</p>
<h3 id="Step-5-Application-Sends-Access-Token-Extraction-Script"><a href="#Step-5-Application-Sends-Access-Token-Extraction-Script" class="headerlink" title="Step 5. Application Sends Access Token Extraction Script"></a>Step 5. Application Sends Access Token Extraction Script</h3><p>Application(Client)는 User-Agent가 유지한 전체 Redirect URI에서 Access Token을 추출할 수 있는 스크립트가 포함된 웹 페이지(보통 Javascript와 같은 Embedded Script가 포함된 HTML 페이지입니다.)를 응답합니다.</p>
<p>Redirect URI로 부터 Access Token을 추출하는 Javascript 소스코드 예제 :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Facebook에서 사용자의 친구 정보를 가져오는 스크립트 */</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> fragment = <span class="built_in">window</span>.location.hash;</span><br><span class="line">    <span class="keyword">var</span> res = getResponse(fragment);</span><br><span class="line">    <span class="built_in">window</span>.location.hash = <span class="string">"_#"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (res.hasError()) &#123;</span><br><span class="line">        $(<span class="string">"&lt;div&gt;Error trying to obtain user's authorization!&lt;/div&gt;"</span>).insertBefore(<span class="string">'#friends'</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    getFriends(res[<span class="string">'access_token'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">friends</span>) </span>&#123;</span><br><span class="line">		$(friends).each(<span class="function"><span class="keyword">function</span>(<span class="params">index, friend</span>) </span>&#123;</span><br><span class="line">			$(<span class="string">'#friends'</span>).find(<span class="string">'ul'</span>).append(<span class="string">'&lt;li&gt;'</span> + friend.name + <span class="string">'&lt;/li&gt;'</span>);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getResponse</span>(<span class="params">fragment</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> attributes = fragment.slice(<span class="number">1</span>).split(<span class="string">'&amp;'</span>);</span><br><span class="line">	<span class="keyword">var</span> response = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	$(attributes).each(<span class="function"><span class="keyword">function</span>(<span class="params">idx, attr</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> keyValue = attr.split(<span class="string">'='</span>);</span><br><span class="line">		response[keyValue[<span class="number">0</span>]] = keyValue[<span class="number">1</span>];</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	response.hasError = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> !response[<span class="string">'access_token'</span>];</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFriends</span>(<span class="params">accessToken, callback</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> baseUrl = <span class="string">'https://graph.facebook.com/v2.9/'</span>;</span><br><span class="line">	<span class="keyword">var</span> endpoint = <span class="string">'me/friends'</span>;</span><br><span class="line">	<span class="keyword">var</span> url = baseUrl + endpoint;</span><br><span class="line"></span><br><span class="line">	$.ajax(&#123;</span><br><span class="line">		url: url,</span><br><span class="line">		beforeSend: <span class="function"><span class="keyword">function</span>(<span class="params">xhr</span>) </span>&#123;</span><br><span class="line">			xhr.setRequestHeader(<span class="string">"Authorization"</span>, <span class="string">"bearer "</span> + accessToken);</span><br><span class="line">		&#125;,</span><br><span class="line">		success: <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> friends = result.data;</span><br><span class="line">			callback(friends);</span><br><span class="line">		&#125;,</span><br><span class="line">		error: <span class="function"><span class="keyword">function</span>(<span class="params">jqXHR, textStatus, errorThrown</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(textStatus);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Step-6-Access-Token-Passed-to-Application"><a href="#Step-6-Access-Token-Passed-to-Application" class="headerlink" title="Step 6. Access Token Passed to Application"></a>Step 6. Access Token Passed to Application</h3><p>User-Agent는 Application(Client) 제공된 스크립트를 실행하고, 추출된 Access Token을 Application(Client)에게 전달합니다.</p>
<p>이제 Application(Client)는 보호된 리소스 사용을 허가받았습니다!<br>Access Token이 만료되거나 폐지될 때까지 Access Token을 사용하여 서비스 API의 보호된 리소스를 제한된 권한 내에서 사용할 수 있습니다.</p>
<h2 id="Resource-Owner-Password-Credentials-Grant"><a href="#Resource-Owner-Password-Credentials-Grant" class="headerlink" title="Resource Owner Password Credentials Grant"></a>Resource Owner Password Credentials Grant</h2><p>Application(Client)는 Resource Owner의 Password Credential 정보(Username, Password)만을 사용하여 Access Token 발급을 요청합니다.</p>
<p>Resource Owner Password Credentials의 동작 방식은 다음과 같습니다. :</p>
<ol>
<li>사용자(Resource Owner)는 인증 정보(Username, Password)를 Application(Client)에게 직접 전달합니다.</li>
<li>Application(Client)는 앞서 받은 인증 정보를 Authorization Server로 전송하여 Access Token 발급을 요청합니다.</li>
<li>Authorization Server는 클라이언트를 인증하고, Resource Owner Credentials을 검증한 후에 Access Token을 발급합니다.</li>
</ol>
<p>Application(Client)과 OAuth 2.0 프로바이더가 같은 도메인/솔루션 내에 존재(First-Party)하여 서로 신뢰할 수 있는 경우 이 Grant 타입을 사용합니다.<br>단, Application(Client)는 사용자의 인증정보(Username, Password)를 별도로 보관하지 않아야 합니다.</p>
<p>Access Token 발급 요청 URL 예시 :</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST <span class="string">"https://provider.oauth2.com/oauth/token"</span> --user $&#123;CLIENT_ID&#125;<span class="symbol">:</span>$&#123;CLIENT_SECRET&#125; -H <span class="string">"accept: application/json"</span> -H <span class="string">"content-type: application/x-www-formurlencoded"</span> -d <span class="string">"grant_type=password&amp;username=$&#123;USERNAME&#125;&amp;password=$&#123;PASSWORD&#125;&amp;scope=$&#123;SCOPE&#125;"</span></span><br></pre></td></tr></table></figure>

<p>Access Token 발급 요청 예시 :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/token</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: server.example.com</span><br><span class="line"><span class="attribute">Authorization</span>: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span><br><span class="line"><span class="attribute">Content-Type</span>: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type=password&amp;username=johndoe&amp;password=A3ddj3w</span><br></pre></td></tr></table></figure>

<p>Access Token 발급 응답 예시 :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Content-Type</span>: application/json;charset=UTF-8</span><br><span class="line"><span class="attribute">Cache-Control</span>: no-store</span><br><span class="line"><span class="attribute">Pragma</span>: no-cache</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    "access_token":"2YotnFZFEjr1zCsicMWpAA",</span><br><span class="line">    "token_type":"example",</span><br><span class="line">    "expires_in":3600,</span><br><span class="line">    "refresh_token":"tGzv3JOkF0XG5Qx2TlKWIA",</span><br><span class="line">    "example_parameter":"example_value"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Client-Credentials-Grant"><a href="#Client-Credentials-Grant" class="headerlink" title="Client Credentials Grant"></a>Client Credentials Grant</h2><p>Application(Client)는 오직 Client Credential 정보(Client ID, Client Secret)만을 사용하여 Access Token 발급을 요청합니다.</p>
<p>이 Grant 타입은 Resource Owner에게서 권한을 위임 받아 제한된 리소스에 접근하는 것이 아니라 <strong>자신의 목적을 위해 어플리케이션을 사용하는 것</strong> 입니다.<br>Refresh Token을 사용하면 쉽게 Access Token을 갱신하여 사용할 수 있고, 동적으로 등록하는 과정이 쉬우며, 서비스 통합 시 모든 과정을 자동화 할 수 있기 때문에 <strong>마이크로서비스 아키텍처</strong>에서 채택되고 있습니다.</p>
<p>Access Token 발급 요청 URL 예시 : </p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST <span class="string">"https://provider.oauth2.com/oauth/token"</span> --user $&#123;CLIENT_ID&#125;<span class="symbol">:</span>$&#123;CLIERNT_SECRET&#125; -d <span class="string">"grant_type=client_credentials&amp;scope=$&#123;SCOPE&#125;"</span></span><br></pre></td></tr></table></figure>

<p>Access Token 발급 요청 예시 :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/token</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: server.example.com</span><br><span class="line"><span class="attribute">Authorization</span>: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span><br><span class="line"><span class="attribute">Content-Type</span>: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type=client_credentials</span><br></pre></td></tr></table></figure>

<p>Access Token 발급 응답 예시 :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Content-Type</span>: application/json;charset=UTF-8</span><br><span class="line"><span class="attribute">Cache-Control</span>: no-store</span><br><span class="line"><span class="attribute">Pragma</span>: no-cache</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    "access_token":"2YotnFZFEjr1zCsicMWpAA",</span><br><span class="line">    "token_type":"example",</span><br><span class="line">    "expires_in":3600,</span><br><span class="line">    "example_parameter":"example_value"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Refresh-Token-Grant"><a href="#Refresh-Token-Grant" class="headerlink" title="Refresh Token Grant"></a>Refresh Token Grant</h2><p>만약 사용기간이 만료된 Access Token을 사용해 제한된 리소스 접근을 시도하면 “Invalid Token Error” 에러 메세지를 보게 됩니다.<br>Access Token 발급시 Refresh Token 값을 함께 받았다면 이를 사용해 새로운 Access Token 발급 요청을 할 수 있습니다.<br>따라서 Third-Party 어플리케이션은 사용자(Resource Owner)가 로그인 상태가 아니더라도 Refresh Token을 통해 새로운 Access Token을 발급받아 필요한 리소스에 접근할 수 있게 됩니다.<br>단, Refresh Token은 Authorization Code Grant 타입과 Resource Owner Password Credentials Grant 타입에서만 사용할 수 있습니다.</p>
<h1 id="Access-Token-사용법"><a href="#Access-Token-사용법" class="headerlink" title="Access Token 사용법"></a>Access Token 사용법</h1><p>일단 Application(Client)가 Access Token을 발급받고 나면 사용기간이 만료되거나 폐기되기 전까지 API를 통해 제한된 권한 내에서 보호된 리소스로 접근할 수 있습니다.</p>
<p>다음은 발급받은 Access Token을 사용하여 API 서버로 접근하는 예시입니다. :</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">curl</span> -X POST <span class="string">"https://example.server.com/api/<span class="variable">$&#123;OBJECT&#125;</span>"</span> -H <span class="string">"Authorization: Bearer <span class="variable">$&#123;ACCESS_TOKEN&#125;</span>"</span></span><br></pre></td></tr></table></figure>

<h1 id="그러면-나는-어떤-Grant-타입을-선택해야-할까"><a href="#그러면-나는-어떤-Grant-타입을-선택해야-할까" class="headerlink" title="그러면 나는 어떤 Grant 타입을 선택해야 할까?"></a>그러면 나는 어떤 Grant 타입을 선택해야 할까?</h1><p>연동하려는 서비스가 First-Party 또는 Third-Party 인지, Web App. 또는 Native App. 또는 User-Agent 기반 App. 인지에 따라 OAuth 2.0 Authorization Grant 타입을 결정할 수 있습니다.</p>
<!-- ![Which OAuth 2.0 Grant should I use?](which-oauth2.0-grant-should-i-use.jpg) -->

<p><img src="which-oauth2-grant-should-i-use.png" alt="Which OAuth 2.0 grant shoul I use?"></p>
<ul>
<li>Web Application<ul>
<li>A web application is a confidential client running on a web server.  Resource owners access the client via an HTML user interface rendered in a user-agent on the device used by the resource owner.  The client credentials as well as any access  token issued to the client are stored on the web server and are not exposed to or accessible by the resource owner.</li>
</ul>
</li>
<li>User-Agent 기반 Application<ul>
<li>A user-agent-based application is a public client in which the client code is downloaded from a web server and executes within a user-agent (e.g., web browser) on the device used by the resource owner.  Protocol data and credentials are easily accessible (and often visible) to the resource owner.  Since such applications reside within the user-agent, they can make seamless use of the user-agent capabilities when requesting authorization.</li>
</ul>
</li>
<li>Native Application<ul>
<li>A native application is a public client installed and executed on the device used by the resource owner.  Protocol data and credentials are accessible to the resource owner.  It is assumed that any client authentication credentials included in the application can be extracted.  On the other hand, dynamically issued credentials such as access tokens or refresh tokens can receive an acceptable level of protection.  At a minimum, these credentials are protected from hostile servers with which the application may interact.  On some platforms, these credentials might be protected from other applications residing on the same device.</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>Reference</strong></p>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2" rel="external nofollow noopener noreferrer" target="_blank">An Introduction to OAuth 2, DigitalOcean</a></li>
<li><a href="https://alexbilbie.com/guide-to-oauth-2-grants/" rel="external nofollow noopener noreferrer" target="_blank">A Guide To OAuth 2.0 Grants, Alex Bilbie Blog</a></li>
<li><a href="https://tools.ietf.org/html/rfc6749#section-3.3" rel="external nofollow noopener noreferrer" target="_blank">RFC 6749 - The OAuth 2.0 Authorization Framework</a></li>
<li><a href="https://www.oauth.com/" rel="external nofollow noopener noreferrer" target="_blank">OAuth.com</a></li>
<li><a href="https://auth0.com/docs/api-auth/which-oauth-flow-to-use" rel="external nofollow noopener noreferrer" target="_blank">Auth0 - Which OAuth 2.0 Grant should I use?</a></li>
</ul>
</blockquote>

            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/OAuth-2-0/">OAuth 2.0</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/02/11/java8-lambda/" data-tooltip="람다 표현식 (Lambda Expression)" aria-label="PREVIOUS: 람다 표현식 (Lambda Expression)">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/12/11/git-secret/" data-tooltip="git-secret" aria-label="NEXT: git-secret">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/" title="Share on Facebook" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://twitter.com/intent/tweet?text=https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/" title="Share on Twitter" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://plus.google.com/share?url=https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/" title="Share on Google+" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 hyunto. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
                    
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-8873866934903362",
    enable_page_level_ads: true
  });
</script>


                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/02/11/java8-lambda/" data-tooltip="람다 표현식 (Lambda Expression)" aria-label="PREVIOUS: 람다 표현식 (Lambda Expression)">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/12/11/git-secret/" data-tooltip="git-secret" aria-label="NEXT: git-secret">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/" title="Share on Facebook" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://twitter.com/intent/tweet?text=https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/" title="Share on Twitter" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://plus.google.com/share?url=https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/" title="Share on Google+" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="2">
    <i id="btn-close-shareoptions" class="fa fa-close"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="_blank" href="https://twitter.com/intent/tweet?text=https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="_blank" href="https://plus.google.com/share?url=https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/author.jpg" alt="Author&#39;s picture">
        
            <h4 id="about-card-name">hyunto</h4>
        
            <div id="about-card-bio"><p>호학심사(好學深思)<br>즐거이 배우고 깊이 생각하라</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>Software Engineer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br>
                Republic of Korea, Seoul
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" rel="external nofollow noopener noreferrer" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search" class="form-control input--large search-input" placeholder="Search ">
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">no post found</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://hyunto.github.io/2018/07/26/Hexo-사용법/">
                            <h3 class="media-heading">Hexo 사용법</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Jul 26, 2018
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>2018년 초, Hexo를 사용해 이 블로그를 만들었으나 집, 회사 PC에서 블로그 Source를 다운받아 Deploy하는 과정에서 여러번 블로그를 망가뜨려 버렸습니다.<br>같은 실수를 반복하지 않기 위해 블로그 소스코드 다운, 빌드, 배포와 글을 작성하는 방법을 간단히 정리합니다.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://hyunto.github.io/2018/07/27/자주-사용하는-Docker-명령어-정리/">
                            <h3 class="media-heading">자주 사용하는 Docker 명령어 정리</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Jul 27, 2018
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>업무 중 자주 사용되는 Docker CLI명령어와 Dockerfile 키워드를 정리합니다.<br>또한 업무중 겪었던 Docker 관련 이슈를 정리합니다.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://hyunto.github.io/2018/11/16/Book-Review-자바-ORM-표준-JPA-프로그래밍/">
                            <img class="media-image" src="https://hyunto.github.io/2018/11/16/Book-Review-자바-ORM-표준-JPA-프로그래밍/book_cover.png" width="90" height="90">
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://hyunto.github.io/2018/11/16/Book-Review-자바-ORM-표준-JPA-프로그래밍/">
                            <h3 class="media-heading">[Book Review] 자바 ORM 표준 JPA 프로그래밍</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Nov 16, 2018
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>자바 ORM 표준 JPA 프로그래밍 (2015) 독서/스터디 후기</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://hyunto.github.io/2018/12/03/Java8-Behavior-Parameterization/">
                            <h3 class="media-heading">동작 파라미터화 (Behavior Parameterization)</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Dec 3, 2018
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p><code>동작 파라미터화 (Behavior Parameterization)</code> 는 “다양한 동작을 수행할 수 있는 코드 블럭을 메서드 파라미터로 전달”함으로써 자주 변경되는 요구사항에 효과적으로 대응할 수 있는 방식을 의미합니다.</p>
<p>여기서는 자주 변경되는 요구사항의 예시를 기반으로 동작 파라미터화를 한 후 Java8에서 추가된 Lambda로 코드를 간소화하는 과정을 보여줍니다.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://hyunto.github.io/2018/12/11/git-secret/">
                            <h3 class="media-heading">git-secret</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Dec 11, 2018
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>비밀번호, Secret Key 값과 같이 보호되야 하는 데이터가 포함된 파일을 그냥 Git Commit &amp; Push 하면 개인적인 데이터가 노출되는 문제점이 발생합니다.</p>
<p><code>git-secret</code> 을 사용하면 개인적인 데이터가 포함된 파일을 암호화 한 후에 Git 저장소에 저장함으로써 문제점을 해결할 수 있습니다.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/">
                            <h3 class="media-heading">OAuth 2.0 - 기본개념 및 Authorization Grant</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Jan 15, 2019
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>최근 OAuth 2.0에 대해 공부하면서 다양한 Grant 종류가 존재함을 알게 되었습니다.<br>기본 개념과 Grant 종류에 대해 잘 정리되어 OAuth 2.0 이해에 도움됬던 사이트들의 내용을 정리합니다.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://hyunto.github.io/2019/02/11/java8-lambda/">
                            <h3 class="media-heading">람다 표현식 (Lambda Expression)</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Feb 11, 2019
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Java8에서 새롭게 추가된 람다 표현식을 정리합니다.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://hyunto.github.io/2019/02/12/java8-stream-basic/">
                            <h3 class="media-heading">스트림(Stream) 소개</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Feb 12, 2019
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Java8에서 새로 추가된 스트림의 기초를 정리합니다.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://hyunto.github.io/2019/02/17/java8-stream-practice/">
                            <h3 class="media-heading">스트림(Stream) 활용</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Feb 17, 2019
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Java8 Stream 활용 방안을 정리합니다.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://hyunto.github.io/2019/03/13/springframework-testing-private-method/">
                            <h3 class="media-heading">Private 메소드 테스트하기</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Mar 13, 2019
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>단위 테스트 작성시 Private 접근자를 가진 메소드를 테스트하는 방법을 정리합니다.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium" data-message-zero="no post found" data-message-one="1 post found" data-message-other="{n} posts found">
                10 posts found
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover_the_legend_of_zelda.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-x2vft4khydnm3fle5k6i00lpg0w2a1yxes6bmk6mdnvmeqzmtipaw6lhf8rx.min.js"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'https://hyunto.github.io/2019/01/15/introduction-to-oauth2.0/';
                 
                    this.page.identifier = '2019/01/15/introduction-to-oauth2.0/';
                 
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'hyunto';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('XKYZJU6GUU', '6f712de882b0c14f1ba276f5970d1d44');
        var algoliaIndex = algoliaClient.initIndex('hyunto.github.io');
    </script>


    </body>
</html>
